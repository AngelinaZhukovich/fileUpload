{"version":3,"sources":["upload.js","app.js"],"names":["upload","selector","optiions","input","document","querySelector","preview","createElement","tagName","classList","add","open","textContent","multi","setAttribute","qualifiedName","value","accept","Array","isArray","join","insertAsjacentElement","position","triggerInput","click","changeHandler","event","target","files","length","from","forEach","file","type","match","regexp","reader","FileReader","onload","ev","src","result","insertAsjacentHTML","where","html","name","readAsDataURL","addEventListener","options"],"mappings":";;ACAA;;AAEA,oBAAQC,QAAR,EAAiB,OAAjB,EAA0B+C,OAA1B,EAAmC;AAC/BnC,EAAAA,KAAK,EAAE,IADwB;AAE/BI,EAAAA,MAAM,EAAE,CAAC,MAAD,EAAS,MAAT,EAAiB,OAAjB;AAFuB,CAAnC;;ADFO,SAASjB,MAAT,CAAgBC,QAAhB,EAA0BC,QAA1B,EAA6C;AAAA,iFAAJ,EAAI;;AAAA;;AAChD,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuBJ,QAAvB,CAAd;AACA,MAAMK,OAAO,GAAGF,QAAQ,CAACG,aAAT,CAAwBC,OAAxB,EAAgC,KAAhC,CAAhB;AAEAF,EAAAA,OAAO,CAACG,SAAR,CAAkBC,GAAlB,CAAsB,SAAtB;AAGA,MAAMC,IAAI,GAAGP,QAAQ,CAACG,aAAT,CAAuBC,OAAvB,EAAgC,QAAhC,CAAb;AACAG,EAAAA,IAAI,CAACF,SAAL,CAAeC,GAAf,CAAmB,KAAnB;AACAC,EAAAA,IAAI,CAACC,WAAL,GAAmB,SAAnB;;AAEA,MAAIV,QAAQ,CAACW,KAAb,EAAoB;AAChBV,IAAAA,KAAK,CAACW,YAAN,CAAoBC,aAApB,EAAmC,UAAnC,EAA+CC,KAA/C,EAAsD,IAAtD;AACH;;AAED,MAAId,QAAQ,CAACe,MAAT,IAAmBC,KAAK,CAACC,OAAN,CAAejB,QAAQ,CAACe,MAAxB,CAAvB,EAAuD;AACnDd,IAAAA,KAAK,CAACW,YAAN,CAAoBC,aAApB,EAAmC,QAAnC,EAA6Cb,QAAQ,CAACe,MAAT,CAAgBG,IAAhB,CAAqB,GAArB,CAA7C;AACH;;AAEDjB,EAAAA,KAAK,CAACkB,qBAAN,CAA6BC,QAA7B,EAAuC,UAAvC,EAAmDhB,OAAnD;AACAH,EAAAA,KAAK,CAACkB,qBAAN,CAA6BC,QAA7B,EAAuC,UAAvC,EAAmDX,IAAnD;;AAGA,MAAMY,YAAY,GAAG,SAAfA,YAAe;AAAA,WAAMpB,KAAK,CAACqB,KAAN,EAAN;AAAA,GAArB;;AAEA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAAC,KAAK,EAAI;AAC5B,QAAG,CAACA,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,MAAvB,EAA8B;AAC1B;AACH;;AAED,QAAMD,KAAK,GAAGV,KAAK,CAACY,IAAN,CAAaJ,KAAK,CAACC,MAAN,CAAaC,KAA1B,CAAd;AAEAA,IAAAA,KAAK,CAACG,OAAN,CAAc,UAAAC,IAAI,EAAI;AACpB,UAAI,CAACA,IAAI,CAACC,IAAL,CAAUC,KAAV,CAAgBC,MAAhB,EAAuB,OAAvB,CAAL,EAAsC;AAClC;AACH;;AAED,UAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AAEAD,MAAAA,MAAM,CAACE,MAAP,GAAgB,UAAAC,EAAE,EAAG;AACjB,YAAMC,GAAG,GAAGD,EAAE,CAACZ,MAAH,CAAUc,MAAtB;AACAnC,QAAAA,OAAO,CAACoC,kBAAR,CAA4BC,KAA5B,EAAmC,YAAnC,EAAiDC,IAAjD,4FAEmBJ,GAFnB,sBAEgCR,IAAI,CAACa,IAFrC;AAKH,OAPD;;AASAT,MAAAA,MAAM,CAACU,aAAP,CAAsBd,IAAtB;AAGD,KAnBD;AAoBF,GA3BD;;AA6BArB,EAAAA,IAAI,CAACoC,gBAAL,CAAuBd,IAAvB,EAA6B,OAA7B,EAAsCV,YAAtC;AAEApB,EAAAA,KAAK,CAAC4C,gBAAN,CAAwB,QAAxB,EAAkCtB,aAAlC;AACH","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["export function upload(selector, optiions, {} = { }){\r\n    const input = document.querySelector(selector)\r\n    const preview = document.createElement (tagName,'div')\r\n\r\n    preview.classList.add('preview')\r\n\r\n\r\n    const open = document.createElement(tagName, 'button');\r\n    open.classList.add('btn');\r\n    open.textContent = 'Открыть';\r\n\r\n    if (optiions.multi) {\r\n        input.setAttribute (qualifiedName, 'multiple', value, true)\r\n    }\r\n\r\n    if (optiions.accept && Array.isArray (optiions.accept)){\r\n        input.setAttribute (qualifiedName, 'accept', optiions.accept.join(',') )\r\n    }\r\n\r\n    input.insertAsjacentElement (position, 'afterend', preview)\r\n    input.insertAsjacentElement (position, 'afterend', open)\r\n\r\n\r\n    const triggerInput = () => input.click ()\r\n\r\n    const changeHandler = event => {\r\n       if(!event.target.files.length){\r\n           return\r\n       }\r\n\r\n       const files = Array.from ( event.target.files)\r\n\r\n       files.forEach(file => {\r\n         if (!file.type.match(regexp,'image')) {\r\n             return\r\n         }\r\n\r\n         const reader = new FileReader ()\r\n\r\n         reader.onload = ev =>{\r\n             const src = ev.target.result\r\n             preview.insertAsjacentHTML (where, 'afterbegin', html,`\r\n                <div class=\"preview-image\">\r\n                    <img src=\"${src}\" alt=\"${file.name}\"/>\r\n                </div>\r\n             `)\r\n         }\r\n\r\n         reader.readAsDataURL (file)\r\n\r\n\r\n       });\r\n    }\r\n\r\n    open.addEventListener (type, 'click', triggerInput)\r\n\r\n    input.addEventListener ('change', changeHandler)\r\n}","import {upload} from './upload.js'\r\n\r\nupload (selector,'#file', options, {\r\n    multi: true,\r\n    accept: ['.png', '.jpg', '.jpeg']\r\n\r\n})"]}